<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
  <head>
    <meta charset="utf-8" />
    <title>
      {{- block "title" . -}}
        {{- with .Params.seo_title -}}
          {{- . -}}
        {{- else with .Title -}}
          {{- . -}}
        {{- else with .Params.opengraph.title -}}
          {{- . -}}
        {{- else -}}
          {{- .Site.Title -}}
        {{- end -}}
      {{- end -}}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {{- block "styles" . }}
      <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" 
        crossorigin="anonymous"
      />
      {{ with resources.Get "css/generic.css" | resources.Minify | resources.Fingerprint -}}
        <link rel="stylesheet" href="{{ .Permalink }}" />
      {{ end -}}
    {{ end -}}
    
    {{- $site := .Site -}}
    {{- $homepage := $site.GetPage "home" -}}
    <!-- Always link to the main RSS feed -->
    {{ with $homepage.OutputFormats.Get "rss" -}}
      <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" title="{{ $site.Title }} RSS (All Articles)" href="{{ .Permalink }}" />
    {{ end -}}
    <!-- If in a section, link to the section's RSS feed -->
    {{- with .Section -}}
      {{ $sectionPage := $site.GetPage . -}}
      {{ with $sectionPage.OutputFormats.Get "rss" -}}
        <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" title="{{ $sectionPage.Title }} RSS ({{ $site.Title }})" href="{{ .Permalink }}" />
      {{ end -}}
    {{ end -}}
    
    {{ block "opengraph" . -}}
      {{ partial "opengraph.html" . -}}
    {{ end -}}
    {{ block "schema" . -}}
      {{ partial "schema.html" . -}}
    {{ end -}}
    {{ block "canonical_url" . -}}
      <link rel="canonical" href="{{ .Permalink }}" />
    {{ end -}}
    {{ block "extra_head" . -}}{{ end -}}
  </head>
  <body class="p-3 d-flex flex-column align-items-center justify-content-center">
    <a href="#main" class="visually-hidden-focusable">Skip to main content</a>
    {{- block "header" . }}
      <header class="page_header {{ default "container" (.Param "bootstrap_container_class") }}">
        {{- partial (default "header.html" (.Param "header_template")) . }}
      </header>
    {{- end }}
    <main id="main" role="main" 
      class="main d-flex flex-column justify-content-center {{ default "container" (.Param "bootstrap_container_class") }}"
      >
    {{- block "precontent" . }}
      <div class="precontent">
        {{ partial (default "empty.html" (.Param "precontent_template")) . }}
      </div>
    {{- end }}
    
    {{- block "content" . }}
    {{- end }}
    
    {{- block "postcontent" . }}
      <div class="postcontent {{ default "container" (.Param "bootstrap_container_class") }}">
        {{ partial (default "empty.html" (.Param "postcontent_template")) . }}
      </div>
    {{- end }}
    </main>

    {{- block "footer" . }}
      <footer class="page_footer {{ default "container" (.Param "bootstrap_container_class") }}">
        {{ partial (default "footer.html" (.Param "footer_template")) . }}
      </footer>
    {{- end }}
    {{- block "bootstrap_js" . }}
      <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" 
        crossorigin="anonymous"
      ></script>
    {{- end }}
    {{- block "extra_js" . }}{{- end }}
  </body>
</html>
