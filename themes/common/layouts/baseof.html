<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
  <head>
    <meta charset="utf-8" />
    <title>
      {{- block "title" . -}}
        {{- with .Params.seo_title -}}
          {{- . -}}
        {{- else with .Title -}}
          {{- . -}}
        {{- else with .Params.opengraph.title -}}
          {{- . -}}
        {{- else -}}
          {{- .Site.Title -}}
        {{- end -}}
      {{- end -}}
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {{- block "styles" . }}
      <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" 
        rel="stylesheet" 
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" 
        crossorigin="anonymous"
      />
      {{ with resources.Get "css/generic.css" | resources.Minify | resources.Fingerprint -}}
        <link rel="stylesheet" href="{{ .Permalink }}" />
      {{ end -}}
    {{ end -}}
    
    {{- $site := .Site -}}
    {{- $homepage := $site.GetPage "home" -}}
    <!-- Always link to the main RSS feed -->
    {{ with $homepage.OutputFormats.Get "rss" -}}
      <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" title="{{ $site.Title }} RSS (All Articles)" href="{{ .Permalink }}" />
    {{ end -}}
    <!-- If in a section, link to the section's RSS feed -->
    {{- with .Section -}}
      {{ $sectionPage := $site.GetPage . -}}
      {{ with $sectionPage.OutputFormats.Get "rss" -}}
        <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" title="{{ $sectionPage.Title }} RSS ({{ $site.Title }})" href="{{ .Permalink }}" />
      {{ end -}}
    {{ end -}}
    
    {{ block "opengraph" . -}}
      {{ partial "opengraph.html" . -}}
    {{ end -}}
    {{ block "schema" . -}}
      {{ partial "schema.html" . -}}
    {{ end -}}
    {{ block "canonical_url" . -}}
      <link rel="canonical" href="{{ .Permalink }}" />
    {{ end -}}
    {{ block "extra_head" . -}}{{ end -}}
  </head>
  <body class="p-3 d-flex flex-column align-items-center justify-content-center">
    <a href="#main" class="visually-hidden-focusable">Skip to main content</a>
    <header class="page_header {{ .Site.Params.bootstrap_container_class }}">
      {{- block "header" . }}
        {{- partial (default "header.html" .Site.Params.header_template) . }}
      {{- end }}
    </header>
    <div class="precontent {{ .Site.Params.bootstrap_container_class }}">
      {{ block "precontent" . }}
        {{ partial (default "empty.html" .Site.Params.precontent_template) . }}
      {{ end }}
    </div>
    <main id="main" role="main" class="{{ .Site.Params.bootstrap_container_class }}">
    {{ block "content" . }}    
    {{ end }}
    </main>
    <div class="postcontent {{ .Site.Params.bootstrap_container_class }}">
      {{ block "postcontent" . }}
        {{ partial (default "empty.html" .Site.Params.postcontent_template) . }}
      {{ end }}
    </div>
    <footer class="page_footer {{ .Site.Params.bootstrap_container_class }}">
      {{ block "footer" . }}
        {{ partial (default "footer.html" .Site.Params.footer_template) . }}
      {{ end }}
    </footer>
    {{ block "bootstrap_js" . }}
      <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" 
        crossorigin="anonymous"
      ></script>
    {{ end }}
    {{ block "extra_js" . }}{{ end }}
  </body>
</html>
